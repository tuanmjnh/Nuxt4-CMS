<script setup lang="ts">
import { ref, computed, onMounted } from 'vue'

const props = defineProps<{
  modelValue?: string
}>()

const emit = defineEmits(['update:modelValue', 'select'])

const searchQuery = ref('')
const activeCategory = ref('recent')

// Emoji Data Structure
interface Emoji {
  char: string
  name: string
}

interface Category {
  id: string
  name: string
  icon: string
  emojis: Emoji[]
}

const recentEmojis = ref<Emoji[]>([])

// Curated list of emojis with searchable names
const emojiCategories: Category[] = [
  {
    id: 'faces',
    name: 'Faces & Emotion',
    icon: 'i-lucide-smile',
    emojis: [
      { char: 'ðŸ˜€', name: 'grinning face' },
      { char: 'ðŸ˜ƒ', name: 'grinning face with big eyes' },
      { char: 'ðŸ˜„', name: 'grinning face with smiling eyes' },
      { char: 'ðŸ˜', name: 'beaming face with smiling eyes' },
      { char: 'ðŸ˜†', name: 'grinning squinting face' },
      { char: 'ðŸ˜…', name: 'grinning face with sweat' },
      { char: 'ðŸ¤£', name: 'rolling on the floor laughing' },
      { char: 'ðŸ˜‚', name: 'face with tears of joy' },
      { char: 'ðŸ™‚', name: 'slightly smiling face' },
      { char: 'ðŸ™ƒ', name: 'upside-down face' },
      { char: 'ðŸ˜‰', name: 'winking face' },
      { char: 'ðŸ˜Š', name: 'smiling face with smiling eyes' },
      { char: 'ðŸ˜‡', name: 'smiling face with halo' },
      { char: 'ðŸ¥°', name: 'smiling face with hearts' },
      { char: 'ðŸ˜', name: 'smiling face with heart-eyes' },
      { char: 'ðŸ¤©', name: 'star-struck' },
      { char: 'ðŸ˜˜', name: 'face blowing a kiss' },
      { char: 'ðŸ˜—', name: 'kissing face' },
      { char: 'ðŸ˜š', name: 'kissing face with closed eyes' },
      { char: 'ðŸ˜™', name: 'kissing face with smiling eyes' },
      { char: 'ðŸ˜‹', name: 'face savoring food' },
      { char: 'ðŸ˜›', name: 'face with tongue' },
      { char: 'ðŸ˜œ', name: 'winking face with tongue' },
      { char: 'ðŸ¤ª', name: 'zany face' },
      { char: 'ðŸ˜', name: 'squinting face with tongue' },
      { char: 'ðŸ¤‘', name: 'money-mouth face' },
      { char: 'ðŸ¤—', name: 'hugging face' },
      { char: 'ðŸ¤­', name: 'face with hand over mouth' },
      { char: 'ðŸ¤«', name: 'shushing face' },
      { char: 'ðŸ¤”', name: 'thinking face' },
      { char: 'ðŸ¤', name: 'zipper-mouth face' },
      { char: 'ðŸ¤¨', name: 'face with raised eyebrow' },
      { char: 'ðŸ˜', name: 'neutral face' },
      { char: 'ðŸ˜‘', name: 'expressionless face' },
      { char: 'ðŸ˜¶', name: 'face without mouth' },
      { char: 'ðŸ˜', name: 'smirking face' },
      { char: 'ðŸ˜’', name: 'unamused face' },
      { char: 'ðŸ™„', name: 'face with rolling eyes' },
      { char: 'ðŸ˜¬', name: 'grimacing face' },
      { char: 'ðŸ¤¥', name: 'lying face' },
      { char: 'ðŸ˜Œ', name: 'relieved face' },
      { char: 'ðŸ˜”', name: 'pensive face' },
      { char: 'ðŸ˜ª', name: 'sleepy face' },
      { char: 'ðŸ¤¤', name: 'drooling face' },
      { char: 'ðŸ˜´', name: 'sleeping face' },
      { char: 'ðŸ˜·', name: 'face with medical mask' },
      { char: 'ðŸ¤’', name: 'face with thermometer' },
      { char: 'ðŸ¤•', name: 'face with head-bandage' },
      { char: 'ðŸ¤¢', name: 'nauseated face' },
      { char: 'ðŸ¤®', name: 'face vomiting' },
      { char: 'ðŸ¤§', name: 'sneezing face' },
      { char: 'ðŸ¥µ', name: 'hot face' },
      { char: 'ðŸ¥¶', name: 'cold face' },
      { char: 'ðŸ¥´', name: 'woozy face' },
      { char: 'ðŸ˜µ', name: 'dizzy face' },
      { char: 'ðŸ¤¯', name: 'exploding head' },
      { char: 'ðŸ¤ ', name: 'cowboy hat face' },
      { char: 'ðŸ¥³', name: 'partying face' },
      { char: 'ðŸ˜Ž', name: 'smiling face with sunglasses' },
      { char: 'ðŸ¤“', name: 'nerd face' },
      { char: 'ðŸ§', name: 'face with monocle' },
      { char: 'ðŸ˜•', name: 'confused face' },
      { char: 'ðŸ˜Ÿ', name: 'worried face' },
      { char: 'ðŸ™', name: 'slightly frowning face' },
      { char: 'ðŸ˜®', name: 'face with open mouth' },
      { char: 'ðŸ˜¯', name: 'hushed face' },
      { char: 'ðŸ˜²', name: 'astonished face' },
      { char: 'ðŸ˜³', name: 'flushed face' },
      { char: 'ðŸ¥º', name: 'pleading face' },
      { char: 'ðŸ˜¦', name: 'frowning face with open mouth' },
      { char: 'ðŸ˜§', name: 'anguished face' },
      { char: 'ðŸ˜¨', name: 'fearful face' },
      { char: 'ðŸ˜°', name: 'anxious face with sweat' },
      { char: 'ðŸ˜¥', name: 'sad but relieved face' },
      { char: 'ðŸ˜¢', name: 'crying face' },
      { char: 'ðŸ˜­', name: 'loudly crying face' },
      { char: 'ðŸ˜±', name: 'face screaming in fear' },
      { char: 'ðŸ˜–', name: 'confounded face' },
      { char: 'ðŸ˜£', name: 'persevering face' },
      { char: 'ðŸ˜ž', name: 'disappointed face' },
      { char: 'ðŸ˜“', name: 'downcast face with sweat' },
      { char: 'ðŸ˜©', name: 'weary face' },
      { char: 'ðŸ˜«', name: 'tired face' },
      { char: 'ðŸ¥±', name: 'yawning face' },
      { char: 'ðŸ˜¤', name: 'face with steam from nose' },
      { char: 'ðŸ˜¡', name: 'pouting face' },
      { char: 'ðŸ˜ ', name: 'angry face' },
      { char: 'ðŸ¤¬', name: 'face with symbols on mouth' },
      { char: 'ðŸ‘¿', name: 'angry face with horns' },
      { char: 'ðŸ˜ˆ', name: 'smiling face with horns' },
      { char: 'ðŸ’€', name: 'skull' },
      { char: 'â˜ ï¸', name: 'skull and crossbones' },
      { char: 'ðŸ’©', name: 'pile of poo' },
      { char: 'ðŸ¤¡', name: 'clown face' },
      { char: 'ðŸ‘¹', name: 'ogre' },
      { char: 'ðŸ‘º', name: 'goblin' },
      { char: 'ðŸ‘»', name: 'ghost' },
      { char: 'ðŸ‘½', name: 'alien' },
      { char: 'ðŸ‘¾', name: 'alien monster' },
      { char: 'ðŸ¤–', name: 'robot' },
    ]
  },
  {
    id: 'people',
    name: 'People & Body',
    icon: 'i-lucide-user',
    emojis: [
      { char: 'ðŸ‘‹', name: 'waving hand' },
      { char: 'ðŸ¤š', name: 'raised back of hand' },
      { char: 'ðŸ–ï¸', name: 'hand with fingers splayed' },
      { char: 'âœ‹', name: 'raised hand' },
      { char: 'ðŸ––', name: 'vulcan salute' },
      { char: 'ðŸ‘Œ', name: 'OK hand' },
      { char: 'ðŸ¤Œ', name: 'pinched fingers' },
      { char: 'ðŸ¤', name: 'pinching hand' },
      { char: 'âœŒï¸', name: 'victory hand' },
      { char: 'ðŸ¤ž', name: 'crossed fingers' },
      { char: 'ðŸ¤Ÿ', name: 'love-you gesture' },
      { char: 'ðŸ¤˜', name: 'sign of the horns' },
      { char: 'ðŸ¤™', name: 'call me hand' },
      { char: 'ðŸ‘ˆ', name: 'backhand index pointing left' },
      { char: 'ðŸ‘‰', name: 'backhand index pointing right' },
      { char: 'ðŸ‘†', name: 'backhand index pointing up' },
      { char: 'ðŸ‘‡', name: 'backhand index pointing down' },
      { char: 'â˜ï¸', name: 'index pointing up' },
      { char: 'ðŸ‘', name: 'thumbs up' },
      { char: 'ðŸ‘Ž', name: 'thumbs down' },
      { char: 'âœŠ', name: 'raised fist' },
      { char: 'ðŸ‘Š', name: 'oncoming fist' },
      { char: 'ðŸ¤›', name: 'left-facing fist' },
      { char: 'ðŸ¤œ', name: 'right-facing fist' },
      { char: 'ðŸ‘', name: 'clapping hands' },
      { char: 'ðŸ™Œ', name: 'raising hands' },
      { char: 'ðŸ‘', name: 'open hands' },
      { char: 'ðŸ¤²', name: 'palms up together' },
      { char: 'ðŸ¤', name: 'handshake' },
      { char: 'ðŸ™', name: 'folded hands' },
      { char: 'ðŸ’…', name: 'nail polish' },
      { char: 'ðŸ¤³', name: 'selfie' },
      { char: 'ðŸ’ª', name: 'flexed biceps' },
    ]
  },
  {
    id: 'nature',
    name: 'Animals & Nature',
    icon: 'i-lucide-leaf',
    emojis: [
      { char: 'ðŸµ', name: 'monkey face' },
      { char: 'ðŸ’', name: 'monkey' },
      { char: 'ðŸ¦', name: 'gorilla' },
      { char: 'ðŸ¶', name: 'dog face' },
      { char: 'ðŸ•', name: 'dog' },
      { char: 'ðŸ©', name: 'poodle' },
      { char: 'ðŸº', name: 'wolf' },
      { char: 'ðŸ¦Š', name: 'fox' },
      { char: 'ðŸ¦', name: 'raccoon' },
      { char: 'ðŸ±', name: 'cat face' },
      { char: 'ðŸˆ', name: 'cat' },
      { char: 'ðŸ¦', name: 'lion' },
      { char: 'ðŸ¯', name: 'tiger face' },
      { char: 'ðŸ…', name: 'tiger' },
      { char: 'ðŸ†', name: 'leopard' },
      { char: 'ðŸ´', name: 'horse face' },
      { char: 'ðŸŽ', name: 'horse' },
      { char: 'ðŸ¦„', name: 'unicorn' },
      { char: 'ðŸ¦“', name: 'zebra' },
      { char: 'ðŸ®', name: 'cow face' },
      { char: 'ðŸ‚', name: 'ox' },
      { char: 'ðŸƒ', name: 'water buffalo' },
      { char: 'ðŸ„', name: 'cow' },
      { char: 'ðŸ·', name: 'pig face' },
      { char: 'ðŸ–', name: 'pig' },
      { char: 'ðŸ—', name: 'boar' },
      { char: 'ðŸ½', name: 'pig nose' },
      { char: 'ðŸ', name: 'ram' },
      { char: 'ðŸ‘', name: 'sheep' },
      { char: 'ðŸ', name: 'goat' },
      { char: 'ðŸª', name: 'camel' },
      { char: 'ðŸ«', name: 'two-hump camel' },
      { char: 'ðŸ¦™', name: 'llama' },
      { char: 'ðŸ¦’', name: 'giraffe' },
      { char: 'ðŸ˜', name: 'elephant' },
      { char: 'ðŸ¦', name: 'rhinoceros' },
      { char: 'ðŸ¦›', name: 'hippopotamus' },
      { char: 'ðŸ­', name: 'mouse face' },
      { char: 'ðŸ', name: 'mouse' },
      { char: 'ðŸ€', name: 'rat' },
      { char: 'ðŸ¹', name: 'hamster' },
      { char: 'ðŸ°', name: 'rabbit face' },
      { char: 'ðŸ‡', name: 'rabbit' },
      { char: 'ðŸ¿ï¸', name: 'chipmunk' },
      { char: 'ðŸ¦”', name: 'hedgehog' },
      { char: 'ðŸ¦‡', name: 'bat' },
      { char: 'ðŸ»', name: 'bear' },
      { char: 'ðŸ¨', name: 'koala' },
      { char: 'ðŸ¼', name: 'panda' },
      { char: 'ðŸ¦¥', name: 'sloth' },
      { char: 'ðŸ¦¦', name: 'otter' },
      { char: 'ðŸ¦¨', name: 'skunk' },
      { char: 'ðŸ¦˜', name: 'kangaroo' },
      { char: 'ðŸ¦¡', name: 'badger' },
      { char: 'ðŸŒµ', name: 'cactus' },
      { char: 'ðŸŽ„', name: 'Christmas tree' },
      { char: 'ðŸŒ²', name: 'evergreen tree' },
      { char: 'ðŸŒ³', name: 'deciduous tree' },
      { char: 'ðŸŒ´', name: 'palm tree' },
      { char: 'ðŸŒ±', name: 'seedling' },
      { char: 'ðŸŒ¿', name: 'herb' },
      { char: 'â˜˜ï¸', name: 'shamrock' },
      { char: 'ðŸ€', name: 'four leaf clover' },
      { char: 'ðŸŽ', name: 'pine decoration' },
      { char: 'ðŸŽ‹', name: 'tanabata tree' },
      { char: 'ðŸƒ', name: 'fluttering leaf' },
      { char: 'ðŸ‚', name: 'fallen leaf' },
      { char: 'ðŸ', name: 'maple leaf' },
      { char: 'ðŸ„', name: 'mushroom' },
      { char: 'ðŸš', name: 'spiral shell' },
      { char: 'ðŸŒ¹', name: 'rose' },
      { char: 'ðŸ¥€', name: 'wilted flower' },
      { char: 'ðŸŒº', name: 'hibiscus' },
      { char: 'ðŸŒ»', name: 'sunflower' },
      { char: 'ðŸŒ¼', name: 'blossom' },
      { char: 'ðŸŒ·', name: 'tulip' },
      { char: 'ðŸ”¥', name: 'fire' },
      { char: 'ðŸ’§', name: 'droplet' },
      { char: 'ðŸŒŠ', name: 'water wave' },
    ]
  },
  {
    id: 'food',
    name: 'Food & Drink',
    icon: 'i-lucide-utensils',
    emojis: [
      { char: 'ðŸ‡', name: 'grapes' },
      { char: 'ðŸˆ', name: 'melon' },
      { char: 'ðŸ‰', name: 'watermelon' },
      { char: 'ðŸŠ', name: 'tangerine' },
      { char: 'ðŸ‹', name: 'lemon' },
      { char: 'ðŸŒ', name: 'banana' },
      { char: 'ðŸ', name: 'pineapple' },
      { char: 'ðŸ¥­', name: 'mango' },
      { char: 'ðŸŽ', name: 'red apple' },
      { char: 'ðŸ', name: 'green apple' },
      { char: 'ðŸ', name: 'pear' },
      { char: 'ðŸ‘', name: 'peach' },
      { char: 'ðŸ’', name: 'cherries' },
      { char: 'ðŸ“', name: 'strawberry' },
      { char: 'ðŸ¥', name: 'kiwi fruit' },
      { char: 'ðŸ…', name: 'tomato' },
      { char: 'ðŸ¥¥', name: 'coconut' },
      { char: 'ðŸ¥‘', name: 'avocado' },
      { char: 'ðŸ†', name: 'eggplant' },
      { char: 'ðŸ¥”', name: 'potato' },
      { char: 'ðŸ¥•', name: 'carrot' },
      { char: 'ðŸŒ½', name: 'ear of corn' },
      { char: 'ðŸŒ¶ï¸', name: 'hot pepper' },
      { char: 'ðŸ¥’', name: 'cucumber' },
      { char: 'ðŸ¥¦', name: 'broccoli' },
      { char: 'ðŸ„', name: 'mushroom' },
      { char: 'ðŸ¥œ', name: 'peanuts' },
      { char: 'ðŸŒ°', name: 'chestnut' },
      { char: 'ðŸž', name: 'bread' },
      { char: 'ðŸ¥', name: 'croissant' },
      { char: 'ðŸ¥–', name: 'baguette bread' },
      { char: 'ðŸ¥¨', name: 'pretzel' },
      { char: 'ðŸ¥¯', name: 'bagel' },
      { char: 'ðŸ¥ž', name: 'pancakes' },
      { char: 'ðŸ§‡', name: 'waffle' },
      { char: 'ðŸ§€', name: 'cheese wedge' },
      { char: 'ðŸ–', name: 'meat on bone' },
      { char: 'ðŸ—', name: 'poultry leg' },
      { char: 'ðŸ¥©', name: 'cut of meat' },
      { char: 'ðŸ¥“', name: 'bacon' },
      { char: 'ðŸ”', name: 'hamburger' },
      { char: 'ðŸŸ', name: 'french fries' },
      { char: 'ðŸ•', name: 'pizza' },
      { char: 'ðŸŒ­', name: 'hot dog' },
      { char: 'ðŸ¥ª', name: 'sandwich' },
      { char: 'ðŸŒ®', name: 'taco' },
      { char: 'ðŸŒ¯', name: 'burrito' },
      { char: 'ðŸ¥™', name: 'stuffed flatbread' },
      { char: 'ðŸ§†', name: 'falafel' },
      { char: 'ðŸ¥š', name: 'egg' },
      { char: 'ðŸ³', name: 'cooking' },
      { char: 'ðŸ¥˜', name: 'shallow pan of food' },
      { char: 'ðŸ²', name: 'pot of food' },
      { char: 'ðŸ¥£', name: 'bowl with spoon' },
      { char: 'ðŸ¥—', name: 'green salad' },
      { char: 'ðŸ¿', name: 'popcorn' },
      { char: 'ðŸ§ˆ', name: 'butter' },
      { char: 'ðŸ§‚', name: 'salt' },
      { char: 'ðŸ¥«', name: 'canned food' },
      { char: 'ðŸ±', name: 'bento box' },
      { char: 'ðŸ˜', name: 'rice cracker' },
      { char: 'ðŸ™', name: 'rice ball' },
      { char: 'ðŸš', name: 'cooked rice' },
      { char: 'ðŸ›', name: 'curry rice' },
      { char: 'ðŸœ', name: 'steaming bowl' },
      { char: 'ðŸ', name: 'spaghetti' },
      { char: 'ðŸ ', name: 'roasted sweet potato' },
      { char: 'ðŸ¢', name: 'oden' },
      { char: 'ðŸ£', name: 'sushi' },
      { char: 'ðŸ¤', name: 'fried shrimp' },
      { char: 'ðŸ¥', name: 'fish cake with swirl' },
      { char: 'ðŸ¥®', name: 'moon cake' },
      { char: 'ðŸ¡', name: 'dango' },
      { char: 'ðŸ¥Ÿ', name: 'dumpling' },
      { char: 'ðŸ¥ ', name: 'fortune cookie' },
      { char: 'ðŸ¥¡', name: 'takeout box' },
      { char: 'ðŸ¦', name: 'soft ice cream' },
      { char: 'ðŸ§', name: 'shaved ice' },
      { char: 'ðŸ¨', name: 'ice cream' },
      { char: 'ðŸ©', name: 'doughnut' },
      { char: 'ðŸª', name: 'cookie' },
      { char: 'ðŸŽ‚', name: 'birthday cake' },
      { char: 'ðŸ°', name: 'shortcake' },
      { char: 'ðŸ§', name: 'cupcake' },
      { char: 'ðŸ¥§', name: 'pie' },
      { char: 'ðŸ«', name: 'chocolate bar' },
      { char: 'ðŸ¬', name: 'candy' },
      { char: 'ðŸ­', name: 'lollipop' },
      { char: 'ðŸ®', name: 'custard' },
      { char: 'ðŸ¯', name: 'honey pot' },
      { char: 'â˜•', name: 'hot beverage' },
      { char: 'ðŸµ', name: 'teacup without handle' },
      { char: 'ðŸ¶', name: 'sake' },
      { char: 'ðŸ¾', name: 'bottle with popping cork' },
      { char: 'ðŸ·', name: 'wine glass' },
      { char: 'ðŸ¸', name: 'cocktail glass' },
      { char: 'ðŸ¹', name: 'tropical drink' },
      { char: 'ðŸº', name: 'beer mug' },
      { char: 'ðŸ»', name: 'clinking beer mugs' },
      { char: 'ðŸ¥‚', name: 'clinking glasses' },
    ]
  },
  {
    id: 'activity',
    name: 'Activities',
    icon: 'i-lucide-dumbbell',
    emojis: [
      { char: 'âš½', name: 'soccer ball' },
      { char: 'ðŸ€', name: 'basketball' },
      { char: 'ðŸˆ', name: 'american football' },
      { char: 'âš¾', name: 'baseball' },
      { char: 'ðŸ¥Ž', name: 'softball' },
      { char: 'ðŸŽ¾', name: 'tennis' },
      { char: 'ðŸ', name: 'volleyball' },
      { char: 'ðŸ‰', name: 'rugby football' },
      { char: 'ðŸ¥', name: 'flying disc' },
      { char: 'ðŸŽ±', name: 'pool 8 ball' },
      { char: 'ðŸª€', name: 'yo-yo' },
      { char: 'ðŸ“', name: 'ping pong' },
      { char: 'ðŸ¸', name: 'badminton' },
      { char: 'ðŸ’', name: 'ice hockey' },
      { char: 'ðŸ‘', name: 'field hockey' },
      { char: 'ðŸ¥', name: 'lacrosse' },
      { char: 'ðŸ', name: 'cricket game' },
      { char: 'ðŸ¥…', name: 'goal net' },
      { char: 'â›³', name: 'flag in hole' },
      { char: 'ðŸŽ£', name: 'fishing pole' },
      { char: 'ðŸ¤¿', name: 'diving mask' },
      { char: 'ðŸ¥Š', name: 'boxing glove' },
      { char: 'ðŸ¥‹', name: 'martial arts uniform' },
      { char: 'â›¸ï¸', name: 'ice skate' },
      { char: 'ðŸ¥Œ', name: 'curling stone' },
      { char: 'ðŸŽ¿', name: 'skis' },
      { char: 'ðŸ›·', name: 'sled' },
      { char: 'ðŸ›¹', name: 'skateboard' },
      { char: 'ðŸŽ¯', name: 'bullseye' },
      { char: 'ðŸŽ®', name: 'video game' },
      { char: 'ðŸŽ°', name: 'slot machine' },
      { char: 'ðŸŽ¨', name: 'artist palette' },
      { char: 'ðŸŽª', name: 'circus tent' },
      { char: 'ðŸŽ­', name: 'performing arts' },
      { char: 'ðŸ–¼ï¸', name: 'framed picture' },
      { char: 'ðŸ§µ', name: 'thread' },
      { char: 'ðŸ§¶', name: 'yarn' },
      { char: 'ðŸŽ¼', name: 'musical score' },
      { char: 'ðŸŽ¤', name: 'microphone' },
      { char: 'ðŸŽ§', name: 'headphone' },
      { char: 'ðŸŽ·', name: 'saxophone' },
      { char: 'ðŸŽ¸', name: 'guitar' },
      { char: 'ðŸŽ¹', name: 'musical keyboard' },
      { char: 'ðŸŽº', name: 'trumpet' },
      { char: 'ðŸŽ»', name: 'violin' },
      { char: 'ðŸ¥', name: 'drum' },
      { char: 'ðŸŽ¬', name: 'clapper board' },
      { char: 'ðŸ¹', name: 'bow and arrow' },
    ]
  },
  {
    id: 'travel',
    name: 'Travel & Places',
    icon: 'i-lucide-plane',
    emojis: [
      { char: 'ðŸš—', name: 'automobile' },
      { char: 'ðŸš•', name: 'taxi' },
      { char: 'ðŸš™', name: 'sport utility vehicle' },
      { char: 'ðŸšŒ', name: 'bus' },
      { char: 'ðŸšŽ', name: 'trolleybus' },
      { char: 'ðŸŽï¸', name: 'racing car' },
      { char: 'ðŸš“', name: 'police car' },
      { char: 'ðŸš‘', name: 'ambulance' },
      { char: 'ðŸš’', name: 'fire engine' },
      { char: 'ðŸš', name: 'minibus' },
      { char: 'ðŸšš', name: 'delivery truck' },
      { char: 'ðŸš›', name: 'articulated lorry' },
      { char: 'ðŸšœ', name: 'tractor' },
      { char: 'ðŸ›´', name: 'kick scooter' },
      { char: 'ðŸš²', name: 'bicycle' },
      { char: 'ðŸ›µ', name: 'motor scooter' },
      { char: 'ðŸï¸', name: 'motorcycle' },
      { char: 'ðŸš¨', name: 'police car light' },
      { char: 'ðŸš”', name: 'oncoming police car' },
      { char: 'ðŸš', name: 'oncoming bus' },
      { char: 'ðŸš˜', name: 'oncoming automobile' },
      { char: 'ðŸš–', name: 'oncoming taxi' },
      { char: 'ðŸš¡', name: 'aerial tramway' },
      { char: 'ðŸš ', name: 'mountain cableway' },
      { char: 'ðŸšŸ', name: 'suspension railway' },
      { char: 'ðŸšƒ', name: 'railway car' },
      { char: 'ðŸš‹', name: 'tram car' },
      { char: 'ðŸš†', name: 'train' },
      { char: 'ðŸš„', name: 'high-speed train' },
      { char: 'ðŸš…', name: 'bullet train' },
      { char: 'ðŸšˆ', name: 'light rail' },
      { char: 'ðŸš‚', name: 'locomotive' },
      { char: 'ðŸš†', name: 'train' },
      { char: 'ðŸš‡', name: 'metro' },
      { char: 'ðŸš', name: 'monorail' },
      { char: 'âœˆï¸', name: 'airplane' },
      { char: 'ðŸ›«', name: 'airplane departure' },
      { char: 'ðŸ›¬', name: 'airplane arrival' },
      { char: 'ðŸš€', name: 'rocket' },
      { char: 'ðŸ›¸', name: 'flying saucer' },
      { char: 'ðŸ©', name: 'love hotel' },
      { char: 'ðŸ¯', name: 'Japanese castle' },
      { char: 'ðŸ°', name: 'castle' },
      { char: 'ðŸŸï¸', name: 'stadium' },
      { char: 'ðŸ—½', name: 'Statue of Liberty' },
      { char: 'ðŸ—¼', name: 'Tokyo tower' },
      { char: 'ðŸ”ï¸', name: 'snow-capped mountain' },
      { char: 'ðŸ–ï¸', name: 'beach with umbrella' },
      { char: 'ðŸï¸', name: 'desert island' },
      { char: 'ðŸœï¸', name: 'desert' },
      { char: 'ðŸŒ‹', name: 'volcano' },
    ]
  },
  {
    id: 'objects',
    name: 'Objects',
    icon: 'i-lucide-lightbulb',
    emojis: [
      { char: 'âŒš', name: 'watch' },
      { char: 'ðŸ“±', name: 'mobile phone' },
      { char: 'ðŸ“²', name: 'mobile phone with arrow' },
      { char: 'ðŸ’»', name: 'laptop' },
      { char: 'âŒ¨ï¸', name: 'keyboard' },
      { char: 'ðŸ–¥ï¸', name: 'desktop computer' },
      { char: 'ðŸ–¨ï¸', name: 'printer' },
      { char: 'ðŸ–±ï¸', name: 'computer mouse' },
      { char: 'ðŸ–²ï¸', name: 'trackball' },
      { char: 'ðŸ•¹ï¸', name: 'joystick' },
      { char: 'ðŸ“·', name: 'camera' },
      { char: 'ðŸ“¸', name: 'camera with flash' },
      { char: 'ðŸ“¹', name: 'video camera' },
      { char: 'ðŸ“¼', name: 'videocassette' },
      { char: 'ðŸ”', name: 'magnifying glass tilted left' },
      { char: 'ðŸ”Ž', name: 'magnifying glass tilted right' },
      { char: 'ðŸ•¯ï¸', name: 'candle' },
      { char: 'ðŸ’¡', name: 'light bulb' },
      { char: 'ðŸ”¦', name: 'flashlight' },
      { char: 'ðŸ®', name: 'red paper lantern' },
      { char: 'ðŸ“”', name: 'notebook with decorative cover' },
      { char: 'ðŸ“•', name: 'closed book' },
      { char: 'ðŸ“–', name: 'open book' },
      { char: 'ðŸ“—', name: 'green book' },
      { char: 'ðŸ“˜', name: 'blue book' },
      { char: 'orange_book', name: 'orange book' },
      { char: 'ðŸ“š', name: 'books' },
      { char: 'ðŸ““', name: 'notebook' },
      { char: 'ðŸ“’', name: 'ledger' },
      { char: 'ðŸ“ƒ', name: 'page with curl' },
      { char: 'ðŸ“œ', name: 'scroll' },
      { char: 'ðŸ“„', name: 'page facing up' },
      { char: 'ðŸ“°', name: 'newspaper' },
      { char: 'ðŸ—žï¸', name: 'rolled-up newspaper' },
      { char: 'ðŸ“‘', name: 'bookmark tabs' },
      { char: 'ðŸ”–', name: 'bookmark' },
      { char: 'ðŸ·ï¸', name: 'label' },
      { char: 'ðŸ’°', name: 'money bag' },
      { char: 'ðŸ’´', name: 'yen banknote' },
      { char: 'ðŸ’µ', name: 'dollar banknote' },
      { char: 'ðŸ’¶', name: 'euro banknote' },
      { char: 'ðŸ’·', name: 'pound banknote' },
      { char: 'ðŸ’¸', name: 'money with wings' },
      { char: 'ðŸ’³', name: 'credit card' },
      { char: 'ðŸ§¾', name: 'receipt' },
      { char: 'âœ‰ï¸', name: 'envelope' },
      { char: 'ðŸ“§', name: 'e-mail' },
      { char: 'ðŸ“¨', name: 'incoming envelope' },
      { char: 'ðŸ“©', name: 'envelope with arrow' },
      { char: 'ðŸ“¤', name: 'outbox tray' },
      { char: 'ðŸ“¥', name: 'inbox tray' },
      { char: 'ðŸ“¦', name: 'package' },
      { char: 'ðŸ“«', name: 'closed mailbox with raised flag' },
      { char: 'ðŸ“ª', name: 'closed mailbox with lowered flag' },
      { char: 'ðŸ“¬', name: 'open mailbox with raised flag' },
      { char: 'ðŸ“­', name: 'open mailbox with lowered flag' },
      { char: 'ðŸ“®', name: 'postbox' },
      { char: 'ðŸ“', name: 'memo' },
      { char: 'ðŸ’¼', name: 'briefcase' },
      { char: 'ðŸ“', name: 'file folder' },
      { char: 'ðŸ“‚', name: 'open file folder' },
      { char: 'ðŸ“…', name: 'calendar' },
      { char: 'ðŸ“†', name: 'tear-off calendar' },
      { char: 'ðŸ—’ï¸', name: 'spiral notepad' },
      { char: 'ðŸ—“ï¸', name: 'spiral calendar' },
      { char: 'ðŸ“‡', name: 'card index' },
      { char: 'ðŸ“ˆ', name: 'chart increasing' },
      { char: 'ðŸ“‰', name: 'chart decreasing' },
      { char: 'ðŸ“Š', name: 'bar chart' },
      { char: 'ðŸ“‹', name: 'clipboard' },
      { char: 'ðŸ“Œ', name: 'pushpin' },
      { char: 'ðŸ“', name: 'round pushpin' },
      { char: 'ðŸ“Ž', name: 'paperclip' },
      { char: 'ðŸ–‡ï¸', name: 'linked paperclips' },
      { char: 'ðŸ“', name: 'straight ruler' },
      { char: 'ðŸ“', name: 'triangular ruler' },
      { char: 'âœ‚ï¸', name: 'scissors' },
      { char: 'ðŸ—ƒï¸', name: 'card file box' },
      { char: 'ðŸ—„ï¸', name: 'file cabinet' },
      { char: 'ðŸ—‘ï¸', name: 'wastebasket' },
      { char: 'ðŸ”’', name: 'locked' },
      { char: 'ðŸ”“', name: 'unlocked' },
      { char: 'ðŸ”', name: 'locked with pen' },
      { char: 'ðŸ”', name: 'locked with key' },
      { char: 'ðŸ”‘', name: 'key' },
      { char: 'ðŸ—ï¸', name: 'old key' },
      { char: 'ðŸ”¨', name: 'hammer' },
      { char: 'ðŸª“', name: 'axe' },
      { char: 'â›ï¸', name: 'pick' },
      { char: 'âš’ï¸', name: 'hammer and pick' },
      { char: 'ðŸ› ï¸', name: 'hammer and wrench' },
      { char: 'ðŸ—¡ï¸', name: 'dagger' },
      { char: 'âš”ï¸', name: 'crossed swords' },
      { char: 'ðŸ”«', name: 'water pistol' },
      { char: 'ðŸ¹', name: 'bow and arrow' },
      { char: 'ðŸ›¡ï¸', name: 'shield' },
      { char: 'ðŸ”§', name: 'wrench' },
      { char: 'ðŸ”©', name: 'nut and bolt' },
      { char: 'âš™ï¸', name: 'gear' },
      { char: 'ðŸ—œï¸', name: 'clamp' },
      { char: 'âš–ï¸', name: 'balance scale' },
      { char: 'ðŸ¦¯', name: 'white cane' },
      { char: 'ðŸ”—', name: 'link' },
      { char: 'â›“ï¸', name: 'chains' },
      { char: 'ðŸ§°', name: 'toolbox' },
      { char: 'ðŸ§²', name: 'magnet' },
      { char: 'âš—ï¸', name: 'alembic' },
      { char: 'ðŸ§ª', name: 'test tube' },
      { char: 'ðŸ§«', name: 'petri dish' },
      { char: 'ðŸ§¬', name: 'dna' },
      { char: 'ðŸ”¬', name: 'microscope' },
      { char: 'ðŸ”­', name: 'telescope' },
      { char: 'ðŸ“¡', name: 'satellite antenna' },
      { char: 'ðŸ’‰', name: 'syringe' },
      { char: 'ðŸ©¸', name: 'drop of blood' },
      { char: 'ðŸ’Š', name: 'pill' },
      { char: 'ðŸ©¹', name: 'adhesive bandage' },
      { char: 'ðŸ©º', name: 'stethoscope' },
      { char: 'ðŸšª', name: 'door' },
      { char: 'ðŸ›ï¸', name: 'bed' },
      { char: 'ðŸ›‹ï¸', name: 'couch and lamp' },
      { char: 'ðŸª‘', name: 'chair' },
      { char: 'ðŸš½', name: 'toilet' },
      { char: 'ðŸš¿', name: 'shower' },
      { char: 'ðŸ›', name: 'bathtub' },
      { char: 'ðŸª’', name: 'razor' },
      { char: 'ðŸ§´', name: 'lotion bottle' },
      { char: 'ðŸ§·', name: 'safety pin' },
      { char: 'ðŸ§¹', name: 'broom' },
      { char: 'ðŸ§º', name: 'basket' },
      { char: 'ðŸ§»', name: 'roll of paper' },
      { char: 'ðŸ§¼', name: 'soap' },
      { char: 'ðŸ§½', name: 'sponge' },
      { char: 'ðŸ§¯', name: 'fire extinguisher' },
      { char: 'ðŸ›’', name: 'shopping cart' },
    ]
  },
  {
    id: 'symbols',
    name: 'Symbols',
    icon: 'i-lucide-heart',
    emojis: [
      { char: 'â¤ï¸', name: 'red heart' },
      { char: 'ðŸ§¡', name: 'orange heart' },
      { char: 'ðŸ’›', name: 'yellow heart' },
      { char: 'ðŸ’š', name: 'green heart' },
      { char: 'ðŸ’™', name: 'blue heart' },
      { char: 'ðŸ’œ', name: 'purple heart' },
      { char: 'ðŸ–¤', name: 'black heart' },
      { char: 'ðŸ¤', name: 'white heart' },
      { char: 'ðŸ¤Ž', name: 'brown heart' },
      { char: 'ðŸ’”', name: 'broken heart' },
      { char: 'â£ï¸', name: 'heart exclamation' },
      { char: 'ðŸ’•', name: 'two hearts' },
      { char: 'ðŸ’ž', name: 'revolving hearts' },
      { char: 'ðŸ’“', name: 'beating heart' },
      { char: 'ðŸ’—', name: 'growing heart' },
      { char: 'ðŸ’–', name: 'sparkling heart' },
      { char: 'ðŸ’˜', name: 'heart with arrow' },
      { char: 'ðŸ’', name: 'heart with ribbon' },
      { char: 'ðŸ’Ÿ', name: 'heart decoration' },
      { char: 'â˜®ï¸', name: 'peace symbol' },
      { char: 'âœï¸', name: 'latin cross' },
      { char: 'â˜ªï¸', name: 'star and crescent' },
      { char: 'ðŸ•‰ï¸', name: 'om' },
      { char: 'â˜¸ï¸', name: 'wheel of dharma' },
      { char: 'âœ¡ï¸', name: 'star of david' },
      { char: 'ðŸ”¯', name: 'dotted six-pointed star' },
      { char: 'ðŸ•Ž', name: 'menorah' },
      { char: 'â˜¯ï¸', name: 'yin yang' },
      { char: 'â˜¦ï¸', name: 'orthodox cross' },
      { char: 'ðŸ›', name: 'place of worship' },
      { char: 'â›Ž', name: 'ophiuchus' },
      { char: 'â™ˆ', name: 'aries' },
      { char: 'â™‰', name: 'taurus' },
      { char: 'â™Š', name: 'gemini' },
      { char: 'â™‹', name: 'cancer' },
      { char: 'â™Œ', name: 'leo' },
      { char: 'â™', name: 'virgo' },
      { char: 'â™Ž', name: 'libra' },
      { char: 'â™', name: 'scorpio' },
      { char: 'â™', name: 'sagittarius' },
      { char: 'â™‘', name: 'capricorn' },
      { char: 'â™’', name: 'aquarius' },
      { char: 'â™“', name: 'pisces' },
      { char: 'ðŸ†”', name: 'ID button' },
      { char: 'âš›ï¸', name: 'atom symbol' },
      { char: 'ðŸ‰‘', name: 'Japanese â€œacceptableâ€ button' },
      { char: 'â˜¢ï¸', name: 'radioactive' },
      { char: 'â˜£ï¸', name: 'biohazard' },
      { char: 'ðŸ“´', name: 'mobile phone off' },
      { char: 'ðŸ“³', name: 'vibration mode' },
      { char: 'ðŸˆ¶', name: 'Japanese â€œnot free of chargeâ€ button' },
      { char: 'ðŸˆš', name: 'Japanese â€œfree of chargeâ€ button' },
      { char: 'ðŸˆ¸', name: 'Japanese â€œapplicationâ€ button' },
      { char: 'ðŸˆº', name: 'Japanese â€œopen for businessâ€ button' },
      { char: 'ðŸˆ·ï¸', name: 'Japanese â€œmonthly amountâ€ button' },
      { char: 'âœ´ï¸', name: 'eight-pointed star' },
      { char: 'ðŸ†š', name: 'VS button' },
      { char: 'ðŸ’®', name: 'white flower' },
      { char: 'ðŸ‰', name: 'Japanese â€œbargainâ€ button' },
      { char: 'ãŠ™ï¸', name: 'Japanese â€œsecretâ€ button' },
      { char: 'ãŠ—ï¸', name: 'Japanese â€œcongratulationsâ€ button' },
      { char: 'ðŸˆ´', name: 'Japanese â€œpassing gradeâ€ button' },
      { char: 'ðŸˆµ', name: 'Japanese â€œno vacancyâ€ button' },
      { char: 'ðŸˆ¹', name: 'Japanese â€œdiscountâ€ button' },
      { char: 'ðŸˆ²', name: 'Japanese â€œprohibitedâ€ button' },
      { char: 'ðŸ…°ï¸', name: 'A button (blood type)' },
      { char: 'ðŸ…±ï¸', name: 'B button (blood type)' },
      { char: 'ðŸ†Ž', name: 'AB button (blood type)' },
      { char: 'ðŸ†‘', name: 'CL button' },
      { char: 'ðŸ…¾ï¸', name: 'O button (blood type)' },
      { char: 'ðŸ†˜', name: 'SOS button' },
      { char: 'âŒ', name: 'cross mark' },
      { char: 'â­•', name: 'hollow red circle' },
      { char: 'ðŸ›‘', name: 'stop sign' },
      { char: 'â›”', name: 'no entry' },
      { char: 'ðŸ“›', name: 'name badge' },
      { char: 'ðŸš«', name: 'prohibited' },
      { char: 'ðŸ’¯', name: 'hundred points' },
      { char: 'ðŸ’¢', name: 'anger symbol' },
      { char: 'â™¨ï¸', name: 'hot springs' },
      { char: 'ðŸš·', name: 'no pedestrians' },
      { char: 'ðŸš¯', name: 'no littering' },
      { char: 'ðŸš³', name: 'no bicycles' },
      { char: 'ðŸš±', name: 'non-potable water' },
      { char: 'ðŸ”ž', name: 'no one under eighteen' },
      { char: 'ðŸ“µ', name: 'no mobile phones' },
      { char: 'ðŸš­', name: 'no smoking' },
      { char: 'â—', name: 'exclamation mark' },
      { char: 'â•', name: 'white exclamation mark' },
      { char: 'â“', name: 'question mark' },
      { char: 'â”', name: 'white question mark' },
      { char: 'â€¼ï¸', name: 'double exclamation mark' },
      { char: 'â‰ï¸', name: 'exclamation question mark' },
      { char: 'ðŸ”…', name: 'dim button' },
      { char: 'ðŸ”†', name: 'bright button' },
      { char: 'ã€½ï¸', name: 'part alternation mark' },
      { char: 'âš ï¸', name: 'warning' },
      { char: 'ðŸš¸', name: 'children crossing' },
      { char: 'ðŸ”±', name: 'trident emblem' },
      { char: 'ðŸ”°', name: 'Japanese symbol for beginner' },
      { char: 'â™»ï¸', name: 'recycling symbol' },
      { char: 'âœ…', name: 'check mark button' },
      { char: 'ðŸˆ¯', name: 'Japanese â€œreservedâ€ button' },
      { char: 'ðŸ’¹', name: 'chart increasing with yen' },
      { char: 'â‡ï¸', name: 'sparkle' },
      { char: 'âœ³ï¸', name: 'eight-spoked asterisk' },
      { char: 'âŽ', name: 'cross mark button' },
      { char: 'ðŸŒ', name: 'globe with meridians' },
      { char: 'ðŸ’ ', name: 'diamond with a dot' },
      { char: 'â“‚ï¸', name: 'circled M' },
      { char: 'ðŸŒ€', name: 'cyclone' },
      { char: 'ðŸ’¤', name: 'zzz' },
      { char: 'ðŸ§', name: 'ATM sign' },
      { char: 'ðŸš¾', name: 'water closet' },
      { char: 'â™¿', name: 'wheelchair symbol' },
      { char: 'ðŸ…¿ï¸', name: 'P button' },
      { char: 'ðŸˆ³', name: 'Japanese â€œvacancyâ€ button' },
    ]
  }
]

onMounted(() => {
  const recent = localStorage.getItem('nuxt4-cms-recent-emojis')
  if (recent) {
    try {
      recentEmojis.value = JSON.parse(recent)
    } catch (e) {
      console.error('Failed to parse recent emojis', e)
    }
  }

  // Set default active category to faces if no filtered search
  activeCategory.value = 'faces'
})

const filteredEmojis = computed(() => {
  if (searchQuery.value) {
    const query = searchQuery.value.toLowerCase()

    // Search across all categories
    let results: Emoji[] = []
    emojiCategories.forEach(cat => {
      const matches = cat.emojis.filter(e => e.name.toLowerCase().includes(query) || e.char === query)
      results = [...results, ...matches]
    })
    return results
  }

  if (activeCategory.value === 'recent') {
    return recentEmojis.value
  }

  const category = emojiCategories.find(c => c.id === activeCategory.value)
  return category ? category.emojis : []
})

const selectEmoji = (emoji: Emoji) => {
  // Add to recent
  const newRecent = [emoji, ...recentEmojis.value.filter(e => e.char !== emoji.char)].slice(0, 30)
  recentEmojis.value = newRecent
  localStorage.setItem('nuxt4-cms-recent-emojis', JSON.stringify(newRecent))

  emit('update:modelValue', emoji.char)
  emit('select', emoji.char)
}

</script>

<template>
  <div class="flex flex-col gap-3 min-w-[300px] h-full overflow-hidden">
    <!-- Header: Tabs for Categories -->
    <div class="flex items-center gap-1 overflow-x-auto pb-2 border-b dark:border-gray-700 no-scrollbar">
      <button type="button" class="p-2 rounded-md hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors shrink-0"
        :class="{ 'text-primary-500 bg-primary-50 dark:bg-primary-950/30': activeCategory === 'recent' && !searchQuery }"
        @click="activeCategory = 'recent'; searchQuery = ''" title="Recently Used">
        <UIcon name="i-lucide-clock" class="w-5 h-5" />
      </button>
      <button v-for="cat in emojiCategories" :key="cat.id" type="button"
        class="p-2 rounded-md hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors shrink-0"
        :class="{ 'text-primary-500 bg-primary-50 dark:bg-primary-950/30': activeCategory === cat.id && !searchQuery }"
        @click="activeCategory = cat.id; searchQuery = ''" :title="cat.name">
        <UIcon :name="cat.icon" class="w-5 h-5" />
      </button>
    </div>

    <!-- Search -->
    <UInput v-model="searchQuery" :placeholder="$t('editor.enter_emoji') || 'Search emojis...'" icon="i-lucide-search"
      autofocus size="sm" />

    <!-- Grid -->
    <div class="flex-1 overflow-y-auto min-h-[250px] max-h-[300px] pr-1">
      <div v-if="filteredEmojis.length === 0" class="text-center py-8 text-gray-500 text-sm">
        No emojis found
      </div>

      <div v-else>
        <div v-if="!searchQuery && activeCategory === 'recent' && recentEmojis.length === 0"
          class="text-center py-8 text-gray-500 text-sm">
          No recently used emojis
        </div>

        <div class="grid grid-cols-8 gap-1">
          <button v-for="emoji in filteredEmojis" :key="emoji.char" type="button"
            class="flex items-center justify-center p-2 rounded hover:bg-gray-100 dark:hover:bg-gray-800 text-xl transition-colors aspect-square"
            @click="selectEmoji(emoji)" :title="emoji.name">
            {{ emoji.char }}
          </button>
        </div>
      </div>
    </div>
  </div>
</template>

<style scoped>
.no-scrollbar::-webkit-scrollbar {
  display: none;
}

.no-scrollbar {
  -ms-overflow-style: none;
  scrollbar-width: none;
}
</style>
